프롬프트 UX를 BAAS·바이브 코딩 컨텍스트에서 일관되게 설계할 수 있도록, **세부 가이드라인 체크리스트** 형태로 정리했습니다.

***

## 1. 구조 원칙: “목적–맥락–제약–출력–후속”

1) **목적(Goal) 먼저 명시**  
- 한 문장으로 “무엇을 위해 쓰는 프롬프트인지”부터 적는다.  
- 예: “이 챕터의 MECE 아웃라인을 생성하는 것이 목적이다.”

2) **맥락(Context) 요약 제공**  
- 사용자·도메인·현재 파일/상태를 짧게 구조화해 제공한다.  
- 예: `[BOOK CONTEXT]`, `[CHAPTER CONTEXT]`, `[CODEBASE CONTEXT]` 블록.

3) **제약(Constraints) 명시**  
- 품질·길이·언어·톤·금지사항·성능 등.  
- 예: “한국어, 전략 컨설팅 문체, 3~5 섹션, 숫자 데이터는 허구 금지.”

4) **출력(Output) 포맷 고정**  
- Markdown / JSON / 표 등 형식과 필드를 명시한다.  
- 예: “JSON으로만 응답. 필드: `title`, `sections[]`, `summary`.”

5) **후속(Next step) 상정**  
- “이 결과는 다음 그래프/에이전트에게 전달된다”를 프롬프트에 써둔다.  
- 예: “이 JSON은 LangGraph의 ChapterState.outline으로 바로 들어간다.”

***

## 2. 입력 UX: 사용자가 프롬프트를 잘 쓰게 만드는 법

1) **폼 기반 수집**  
- 자유 텍스트 필드 하나 대신, 목적별 필드를 나눈다.  
- 예: “주제/독자/톤/목표/필수 포함 요소/피하고 싶은 것” 입력 폼.

2) **힌트 & 예시 제공**  
- 각 필드에 placeholder로 “좋은 입력 예시”를 넣는다.  
- 예: “예: 한국 B2B SaaS 스타트업의 영업 리더”.

3) **사전 템플릿(Playbook)**  
- “새 책 기획”, “챕터 리팩토링”, “버그 재현 설명” 등 프리셋 버튼 제공.  
- 각 프리셋은 해당 작업에 최적화된 프롬프트 스켈레톤을 채워준다.

4) **에러·부정확 응답 시 재프롬프트 UX**  
- “어디가 마음에 안 들었는지” 선택/텍스트 입력 후, 재프롬프트에 자동 반영.  
- 예: “구조가 약함 / 사례가 부족 / 너무 이론적 / 너무 길다”.

***

## 3. 메시지 설계: Role 기반 계층

1) **developer/system/user/tool 역할 분리**  
- developer: 전역 규칙·보안·톤·금지사항.
- system: 현재 세션·문맥·RAG 요약.  
- user: 실제 “요청/질문/지시”.  
- tool: RAG 결과·메트릭 같은 사실 데이터.

2) **developer 메시지에 넣을 것**  
- 앱 전역 스타일, 구조화 출력 원칙, 안전/금지 규칙.  
- 자주 바뀔 내용(특정 책 맥락)은 넣지 않는다.

3) **system 메시지에 넣을 것**  
- 현재 Book/Chapter 메타데이터, RAG 요약, 이전 결정사항.  
- 길어지지 않게 “요약/핵심만” 유지.

4) **user 메시지 패턴**  
- “목적 → 배경 → 구체 요청 → 출력 형식” 순으로 구성.  
- 예:  
  - 목적: “챕터 3 초안 작성”  
  - 배경: “전략 리더를 위한 Agentic AI 도입서”  
  - 요청: “사례 2개 포함, 반론 1개 포함”  
  - 출력: “Markdown, H2/H3 구조”.

***

## 4. 상호작용 패턴: 한 번에 다 하지 말고, 단계로 나누기

1) **“한 방 프롬프트” 금지, 단계화**  
- Plan → Generate → Critique → Refine → Final 패턴으로 자르는 것을 기본으로 한다.

2) **Refine 프롬프트 UX**  
- 최초 응답 이후, “이 부분만 수정” 버튼 (예: 서론/사례/결론만).  
- 내부적으로는 “원본 + 수정 지시 + 수정 대상 범위”를 system/user로 분리.

3) **디버깅·설명 프롬프트**  
- “왜 이런 결과가 나왔는지 설명해줘”를 위한 전용 템플릿 준비.  
- Prompt UX 연구에서, 사용자의 **멘탈 모델 정확도**가 장기 사용성에 중요.

4) **Prompt History & 버전 UI**  
- 이전에 썼던 성공적인 프롬프트를 “라이브러리”로 재사용.  
- 버전별 성공률/AgentEval 점수와 함께 보여준다.

***

## 5. 평가 & 데이터 수집 항목

1) **First-prompt success rate**  
- 첫 프롬프트로 “실사용 가능한 결과”가 나왔는지 비율 측정.

2) **Refinement efficiency**  
- 평균 몇 번의 재프롬프트 후 만족 수준에 도달하는지.  

3) **실패 패턴 로깅**  
- “맥락 부족 / 제약 모호 / 출력 형식 불일치 / 모델 한계” 등 카테고리로 태깅.

4) **프롬프트 단위 메타데이터**  
- `prompt_id`, `version`, `role`, `use_case`, `success_metrics` 등을 저장.  
- 나중에 A/B 테스트 및 자동 추천에 사용.

***

## 6. BAAS 전용 체크리스트

BAAS에서 새로운 프롬프트를 만들 때마다 다음을 확인:

- [ ] **책/챕터/에이전트의 역할**이 프롬프트에 명확히 반영되었는가.  
- [ ] 저자의 **관점·톤·금지사항**이 developer/system 레벨에 정의되어 있는가.
- [ ] 출력이 바로 **다음 그래프/노드의 입력 스키마**에 매핑될 수 있는가.  
- [ ] RAG 문맥이 “관련성 필터”를 거쳐 필요한 만큼만 들어가는가.
- [ ] 사용자가 “무엇을 쓰면 좋은지”를 UI에서 안내받을 수 있는가 (예시/힌트/필드 분리).
- [ ] 결과에 대한 피드백(점수·코멘트)이 프롬프트 개선 데이터로 저장되는가.

이 항목들을 그대로 `/05_ux_interaction_ops/prompt-ux-guidelines.md`의 섹션 헤더로 사용하면, 이후에는 각 항목에 BAAS 맞춤 예시·실제 프롬프트 템플릿·UI 스크린샷만 채워 넣으면 됩니다.